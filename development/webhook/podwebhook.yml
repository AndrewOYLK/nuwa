apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: nuwa-webhook
webhooks:
  - name: injector.nuwa.nip.io
    admissionReviewVersions: ["v1", "v1beta1"]
    sideEffects: NoneOnDryRun
    rules:
      - operations: [ "CREATE" ]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["pods"]
        scope: "Namespaced"
    failurePolicy: Ignore  #  Fail/Ignore
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUQ5VENDQXQyZ0F3SUJBZ0lVQmo4Vk1VUi8wNS94T2VkZVg1MWhtaDdmSVprd0RRWUpLb1pJaHZjTkFRRUwKQlFBd2NqRUxNQWtHQTFVRUJoTUNRMDR4RWpBUUJnTlZCQWdUQ1VkMVlXNW5XbWh2ZFRFU01CQUdBMVVFQnhNSgpSM1ZoYm1kYWFHOTFNUXd3Q2dZRFZRUUtFd05yT0hNeER6QU5CZ05WQkFzVEJsTjVjM1JsYlRFY01Cb0dBMVVFCkF4TVRhM1ZpWlhKdVpYUmxjeTFUYjNWc2JXRjBaVEFlRncweU1EQTFNREV4TmpNNU1EQmFGdzAwTURBME1qWXgKTmpNNU1EQmFNR014Q3pBSkJnTlZCQVlUQWtOT01SSXdFQVlEVlFRSUV3bEhkV0Z1WjFwb2IzVXhFakFRQmdOVgpCQWNUQ1VkMVlXNW5XbWh2ZFRFTU1Bb0dBMVVFQ2hNRGF6aHpNUTh3RFFZRFZRUUxFd1pUZVhOMFpXMHhEVEFMCkJnTlZCQU1UQkc1MWQyRXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFDcllEZkEKUDhRTWp4SXVVNENPUmFrRFp0MWZwVlk4QnVRd1lSNVcwWlo2VUFrQ0ZlZmkrZ1R1S1VMZTNYR3J3SGRtMzVreApmMUU2RWx4TDVOOXhkL0lLWkYzcDc3NUgybFFzTmJpelRicVVpdWRTcTUyQmhQOG9ucUR2aG1UZEFEZHR6SkZ5CmN3Z3lxVEt5Ny9SamhxRGJiREdOTVp4d2xrNlJab1ZzMDVkM2ZvUXNMUEVlY01hWXBWdHBuUkdiQzV5UG4xVjEKQ0h2enF4OHZ3SVVmWG9lMllONU5rYlpGT0g0L1ZvaGR1TFhRRDdBVUNUTDN1OE90Tzd3aU9MUEl2Yzc1cTlISwpCeHhDWGQ1aEk5ams3alZzS0lMd1VucUExN0hxVDJzUVo3UVN3Zm5wK254ZUpHRW9WZElOMVR6MDdpY3ZhdS9ECmxaT2RKaEtXcmdmWndYbm5BZ01CQUFHamdaRXdnWTR3RGdZRFZSMFBBUUgvQkFRREFnV2dNQjBHQTFVZEpRUVcKTUJRR0NDc0dBUVVGQndNQkJnZ3JCZ0VGQlFjREFqQU1CZ05WSFJNQkFmOEVBakFBTUIwR0ExVWREZ1FXQkJSUAprckZMcVY3Mi9aWENWZ25tcmVkQnFDU2FDakFmQmdOVkhTTUVHREFXZ0JRbzlpV1ZsY2NZTUZYUEQ5Qkk3UHpqCndPbTJ2VEFQQmdOVkhSRUVDREFHaHdRSzB6Y0NNQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUJBUUExZ1JHbkI0QUsKN08zRGpVM01mNVRWOENMK0VGaXZQYThVODJRazhFeTF6b0d4alVscm1FSVhPNm0xTWtFMVJJbkIxYVB0bHNTcQpkNXF6Z0kyT3J4dE9JbGRiODVyN1cyTVVLQXdXQ1lEVUEyTHE4eHJ6Sm9LWlFaTFJJNGdNL1BZbjZtT0VIdG9sCkFVWDJIZlQ1emR3SXFNc2FpMmtFRXhBNUx6TUlVa044YWpJY1MxeGczcjFSek4xKzV1dGp3TGdEK0kvM1duZXQKYlRBUGVzTFRoWlUrSmU4cDhybVhtVXFYUGU3U1MvY0p4TlhCNXRUajM1bjhqSzZZWGZjVEJGVFd3ZjlhK2VOUwpQdHllcGt0M3FuM0dzejJLcnJucG0xUVNDS2V2OWpHOVJiQ2F2d0VnVWJsVVFuR3FYZHBmYlRUL0p4TWRibmZWCkd0clg4eVNEYTZGYQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
      url: https://10.211.55.2:1443/injector-mutating-pods
  # namespace
  - name: namespace.nuwa.nip.io
    admissionReviewVersions: ["v1", "v1beta1"]
    sideEffects: NoneOnDryRun
    rules:
      - operations: [ "CREATE" ]
        apiGroups: ["","apps","batch"]
        apiVersions: ["v1","v1beta1"]
        resources: ["replicationcontrollers","replicasets","jobs","cronjobs","deployments","statefulset"]
        scope: "Namespaced"
    failurePolicy: Ignore  #  Fail/Ignore
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUQ5VENDQXQyZ0F3SUJBZ0lVQmo4Vk1VUi8wNS94T2VkZVg1MWhtaDdmSVprd0RRWUpLb1pJaHZjTkFRRUwKQlFBd2NqRUxNQWtHQTFVRUJoTUNRMDR4RWpBUUJnTlZCQWdUQ1VkMVlXNW5XbWh2ZFRFU01CQUdBMVVFQnhNSgpSM1ZoYm1kYWFHOTFNUXd3Q2dZRFZRUUtFd05yT0hNeER6QU5CZ05WQkFzVEJsTjVjM1JsYlRFY01Cb0dBMVVFCkF4TVRhM1ZpWlhKdVpYUmxjeTFUYjNWc2JXRjBaVEFlRncweU1EQTFNREV4TmpNNU1EQmFGdzAwTURBME1qWXgKTmpNNU1EQmFNR014Q3pBSkJnTlZCQVlUQWtOT01SSXdFQVlEVlFRSUV3bEhkV0Z1WjFwb2IzVXhFakFRQmdOVgpCQWNUQ1VkMVlXNW5XbWh2ZFRFTU1Bb0dBMVVFQ2hNRGF6aHpNUTh3RFFZRFZRUUxFd1pUZVhOMFpXMHhEVEFMCkJnTlZCQU1UQkc1MWQyRXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFDcllEZkEKUDhRTWp4SXVVNENPUmFrRFp0MWZwVlk4QnVRd1lSNVcwWlo2VUFrQ0ZlZmkrZ1R1S1VMZTNYR3J3SGRtMzVreApmMUU2RWx4TDVOOXhkL0lLWkYzcDc3NUgybFFzTmJpelRicVVpdWRTcTUyQmhQOG9ucUR2aG1UZEFEZHR6SkZ5CmN3Z3lxVEt5Ny9SamhxRGJiREdOTVp4d2xrNlJab1ZzMDVkM2ZvUXNMUEVlY01hWXBWdHBuUkdiQzV5UG4xVjEKQ0h2enF4OHZ3SVVmWG9lMllONU5rYlpGT0g0L1ZvaGR1TFhRRDdBVUNUTDN1OE90Tzd3aU9MUEl2Yzc1cTlISwpCeHhDWGQ1aEk5ams3alZzS0lMd1VucUExN0hxVDJzUVo3UVN3Zm5wK254ZUpHRW9WZElOMVR6MDdpY3ZhdS9ECmxaT2RKaEtXcmdmWndYbm5BZ01CQUFHamdaRXdnWTR3RGdZRFZSMFBBUUgvQkFRREFnV2dNQjBHQTFVZEpRUVcKTUJRR0NDc0dBUVVGQndNQkJnZ3JCZ0VGQlFjREFqQU1CZ05WSFJNQkFmOEVBakFBTUIwR0ExVWREZ1FXQkJSUAprckZMcVY3Mi9aWENWZ25tcmVkQnFDU2FDakFmQmdOVkhTTUVHREFXZ0JRbzlpV1ZsY2NZTUZYUEQ5Qkk3UHpqCndPbTJ2VEFQQmdOVkhSRUVDREFHaHdRSzB6Y0NNQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUJBUUExZ1JHbkI0QUsKN08zRGpVM01mNVRWOENMK0VGaXZQYThVODJRazhFeTF6b0d4alVscm1FSVhPNm0xTWtFMVJJbkIxYVB0bHNTcQpkNXF6Z0kyT3J4dE9JbGRiODVyN1cyTVVLQXdXQ1lEVUEyTHE4eHJ6Sm9LWlFaTFJJNGdNL1BZbjZtT0VIdG9sCkFVWDJIZlQ1emR3SXFNc2FpMmtFRXhBNUx6TUlVa044YWpJY1MxeGczcjFSek4xKzV1dGp3TGdEK0kvM1duZXQKYlRBUGVzTFRoWlUrSmU4cDhybVhtVXFYUGU3U1MvY0p4TlhCNXRUajM1bjhqSzZZWGZjVEJGVFd3ZjlhK2VOUwpQdHllcGt0M3FuM0dzejJLcnJucG0xUVNDS2V2OWpHOVJiQ2F2d0VnVWJsVVFuR3FYZHBmYlRUL0p4TWRibmZWCkd0clg4eVNEYTZGYQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
      url: https://10.211.55.2:1443/namespace-mutating-resource
