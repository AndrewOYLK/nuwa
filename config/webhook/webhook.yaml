apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: nuwa-webhook
webhooks:
  - name: injector.nuwa.nip.io
    admissionReviewVersions: ["v1", "v1beta1"]
    sideEffects: NoneOnDryRun
    rules:
      - operations: [ "CREATE" ]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["pods"]
        scope: "Namespaced"
    failurePolicy: Ignore  #  Fail/Ignore
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUV0akNDQTU2Z0F3SUJBZ0lVRXdFT2hlbEZtNmRzMjJIdExabTRveE5ZRkZRd0RRWUpLb1pJaHZjTkFRRUwKQlFBd2NqRUxNQWtHQTFVRUJoTUNRMDR4RWpBUUJnTlZCQWdUQ1VkMVlXNW5XbWh2ZFRFU01CQUdBMVVFQnhNSgpSM1ZoYm1kYWFHOTFNUXd3Q2dZRFZRUUtFd05yT0hNeER6QU5CZ05WQkFzVEJsTjVjM1JsYlRFY01Cb0dBMVVFCkF4TVRhM1ZpWlhKdVpYUmxjeTFUYjNWc2JXRjBaVEFlRncweU1EQTFNRE13TnpRMU1EQmFGdzAwTURBME1qZ3cKTnpRMU1EQmFNR014Q3pBSkJnTlZCQVlUQWtOT01SSXdFQVlEVlFRSUV3bEhkV0Z1WjFwb2IzVXhFakFRQmdOVgpCQWNUQ1VkMVlXNW5XbWh2ZFRFTU1Bb0dBMVVFQ2hNRGF6aHpNUTh3RFFZRFZRUUxFd1pUZVhOMFpXMHhEVEFMCkJnTlZCQU1UQkc1MWQyRXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFEZCtxMTcKSk5rR3RFSGhLK2I3Z2pIbGN6U1lvWEhYZFlPOUpidzdIYm51a3ZMbkNFSGRCRTQ5MWtnS3ozNDI2UGkzR3ppTgpadWdITzFxU040dy9pdlZib0dwNDl4NXdFVVZvVEtpYXM2eVZaNWMrT1dKS29rL01Jd2dQR2thWldOZm0vZjVrCkgvdUlBQW83L0U5YXBCMHVYcnQ0MGcvVS9ZVHNOTFZKNDZJNXpwczBKb3ZYNXRXaDBoSlhQZU1xbWJwSXFpL24KS3FFZkRnT1U4a3ZIb2YxZnNqTkNIQWxndERUNXhTYW5PdWZCTGw4TW9YMlNvcDFJeGVETFZOMDFyWUxBYmVwcAp3TDN2NlExMlgyUzQxNmlnTG9DRFdoUjlOTEIreE10NEJrb2h4ZEhVdGFMUjVOeHZ6UWNRU29oZjgrVVcxUjU2CjdBRjVxYUdST3d4TnZJbzlBZ01CQUFHamdnRlJNSUlCVFRBT0JnTlZIUThCQWY4RUJBTUNCYUF3SFFZRFZSMGwKQkJZd0ZBWUlLd1lCQlFVSEF3RUdDQ3NHQVFVRkJ3TUNNQXdHQTFVZEV3RUIvd1FDTUFBd0hRWURWUjBPQkJZRQpGQ3BPTnpCWGJyUGRmOWhUaUkwTElOMkY5U3BlTUI4R0ExVWRJd1FZTUJhQUZLaUtTa3Q2ck83b0d4UnhGalBKCjEwQkJNZzNYTUlITkJnTlZIUkVFZ2NVd2djS0NGRzUxZDJFdGQyVmlhRzl2YXkxelpYSjJhV05sZ2lCdWRYZGgKTFhkbFltaHZiMnN0YzJWeWRtbGpaUzVyZFdKbExYTjVjM1JsYllJa2JuVjNZUzEzWldKb2IyOXJMWE5sY25acApZMlV1YTNWaVpTMXplWE4wWlcwdWMzWmpnamR1ZFhkaExXTnZiblJ5YjJ4c1pYSXRiV0Z1WVdkbGNpMXRaWFJ5CmFXTnpMWE5sY25acFkyVXVhM1ZpWlMxemVYTjBaVzB1YzNaamhpbHVkWGRoTFhkbFltaHZiMnN0YzJWeWRtbGoKWlM1cmRXSmxMWE41YzNSbGJTNXpkbU02TVRRME16QU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFLSm1HdkZLNwpiQjJ0TXFOeTZzZ0RvWkhoWXN4bjhhVUlWdHlYbDhRL2ZRYVFwY3FJUldWbm1RYVpOZ3JTeVVtZ3NQZVo0UVhkCmJLaGZRanFHaFFNNU96N3diUm9MRWlTRXlXTGV2eHpFTXBGRHNTcGFReTF2WEI5S1BYVG5YT1JqajNQTmRiMHQKT00rV3NtNlpiWTZ0RmZoMFN4MmJVc0o3WStGaEtZNXVrcXZGZy9Qbm41RldTdUwyRmRDM3ZHTEFyc1k4WEl2MwpzWHEybXB3NWQxL2JobzlpRUpsWEtUV0pIWU1oc3lCaFViTlFQS3BaTlRmb3lxWXM0b3JVUmZzNFlPU25KRzJ4ClVsb2F6YWZabHhSZE4rTCtwVVoyUFUvN0hldUJucXUrUG5tRGhGUE5OYVZodHZ6MDlESTFNaW85dWdIQTJFZGcKVEFnRW84bjUxUTB1bnc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
      service:
        name: nuwa-webhook-service
        namespace: kube-system
        path: /injector-mutating-pods
        port: 1443
  - name: namespace.nuwa.nip.io
    admissionReviewVersions: ["v1", "v1beta1"]
    sideEffects: NoneOnDryRun
    rules:
      - operations: [ "CREATE" ]
        apiGroups: ["","apps","batch"]
        apiVersions: ["v1","v1beta1"]
        resources: ["replicationcontrollers","replicasets","jobs","cronjobs","deployments","statefulset"]
        scope: "Namespaced"
    failurePolicy: Ignore  #  Fail/Ignore
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUV0akNDQTU2Z0F3SUJBZ0lVRXdFT2hlbEZtNmRzMjJIdExabTRveE5ZRkZRd0RRWUpLb1pJaHZjTkFRRUwKQlFBd2NqRUxNQWtHQTFVRUJoTUNRMDR4RWpBUUJnTlZCQWdUQ1VkMVlXNW5XbWh2ZFRFU01CQUdBMVVFQnhNSgpSM1ZoYm1kYWFHOTFNUXd3Q2dZRFZRUUtFd05yT0hNeER6QU5CZ05WQkFzVEJsTjVjM1JsYlRFY01Cb0dBMVVFCkF4TVRhM1ZpWlhKdVpYUmxjeTFUYjNWc2JXRjBaVEFlRncweU1EQTFNRE13TnpRMU1EQmFGdzAwTURBME1qZ3cKTnpRMU1EQmFNR014Q3pBSkJnTlZCQVlUQWtOT01SSXdFQVlEVlFRSUV3bEhkV0Z1WjFwb2IzVXhFakFRQmdOVgpCQWNUQ1VkMVlXNW5XbWh2ZFRFTU1Bb0dBMVVFQ2hNRGF6aHpNUTh3RFFZRFZRUUxFd1pUZVhOMFpXMHhEVEFMCkJnTlZCQU1UQkc1MWQyRXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFEZCtxMTcKSk5rR3RFSGhLK2I3Z2pIbGN6U1lvWEhYZFlPOUpidzdIYm51a3ZMbkNFSGRCRTQ5MWtnS3ozNDI2UGkzR3ppTgpadWdITzFxU040dy9pdlZib0dwNDl4NXdFVVZvVEtpYXM2eVZaNWMrT1dKS29rL01Jd2dQR2thWldOZm0vZjVrCkgvdUlBQW83L0U5YXBCMHVYcnQ0MGcvVS9ZVHNOTFZKNDZJNXpwczBKb3ZYNXRXaDBoSlhQZU1xbWJwSXFpL24KS3FFZkRnT1U4a3ZIb2YxZnNqTkNIQWxndERUNXhTYW5PdWZCTGw4TW9YMlNvcDFJeGVETFZOMDFyWUxBYmVwcAp3TDN2NlExMlgyUzQxNmlnTG9DRFdoUjlOTEIreE10NEJrb2h4ZEhVdGFMUjVOeHZ6UWNRU29oZjgrVVcxUjU2CjdBRjVxYUdST3d4TnZJbzlBZ01CQUFHamdnRlJNSUlCVFRBT0JnTlZIUThCQWY4RUJBTUNCYUF3SFFZRFZSMGwKQkJZd0ZBWUlLd1lCQlFVSEF3RUdDQ3NHQVFVRkJ3TUNNQXdHQTFVZEV3RUIvd1FDTUFBd0hRWURWUjBPQkJZRQpGQ3BPTnpCWGJyUGRmOWhUaUkwTElOMkY5U3BlTUI4R0ExVWRJd1FZTUJhQUZLaUtTa3Q2ck83b0d4UnhGalBKCjEwQkJNZzNYTUlITkJnTlZIUkVFZ2NVd2djS0NGRzUxZDJFdGQyVmlhRzl2YXkxelpYSjJhV05sZ2lCdWRYZGgKTFhkbFltaHZiMnN0YzJWeWRtbGpaUzVyZFdKbExYTjVjM1JsYllJa2JuVjNZUzEzWldKb2IyOXJMWE5sY25acApZMlV1YTNWaVpTMXplWE4wWlcwdWMzWmpnamR1ZFhkaExXTnZiblJ5YjJ4c1pYSXRiV0Z1WVdkbGNpMXRaWFJ5CmFXTnpMWE5sY25acFkyVXVhM1ZpWlMxemVYTjBaVzB1YzNaamhpbHVkWGRoTFhkbFltaHZiMnN0YzJWeWRtbGoKWlM1cmRXSmxMWE41YzNSbGJTNXpkbU02TVRRME16QU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFLSm1HdkZLNwpiQjJ0TXFOeTZzZ0RvWkhoWXN4bjhhVUlWdHlYbDhRL2ZRYVFwY3FJUldWbm1RYVpOZ3JTeVVtZ3NQZVo0UVhkCmJLaGZRanFHaFFNNU96N3diUm9MRWlTRXlXTGV2eHpFTXBGRHNTcGFReTF2WEI5S1BYVG5YT1JqajNQTmRiMHQKT00rV3NtNlpiWTZ0RmZoMFN4MmJVc0o3WStGaEtZNXVrcXZGZy9Qbm41RldTdUwyRmRDM3ZHTEFyc1k4WEl2MwpzWHEybXB3NWQxL2JobzlpRUpsWEtUV0pIWU1oc3lCaFViTlFQS3BaTlRmb3lxWXM0b3JVUmZzNFlPU25KRzJ4ClVsb2F6YWZabHhSZE4rTCtwVVoyUFUvN0hldUJucXUrUG5tRGhGUE5OYVZodHZ6MDlESTFNaW85dWdIQTJFZGcKVEFnRW84bjUxUTB1bnc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
      service:
        name: nuwa-webhook-service
        namespace: kube-system
        path: /namespace-mutating-resource
        port: 1443
