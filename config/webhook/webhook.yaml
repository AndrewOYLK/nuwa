apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: webhook
webhooks:
  - name: injector.nuwa.nip.io
    admissionReviewVersions: ["v1", "v1beta1"]
    sideEffects: NoneOnDryRun
    rules:
      - operations: [ "CREATE" ]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["pods"]
        scope: "Namespaced"
    failurePolicy: Ignore  #  Fail/Ignore
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUV0akNDQTU2Z0F3SUJBZ0lVYUtDeHZQeHVqcXBQdE9oNWsvVGpkMXBkc3RFd0RRWUpLb1pJaHZjTkFRRUwKQlFBd2NqRUxNQWtHQTFVRUJoTUNRMDR4RWpBUUJnTlZCQWdUQ1VkMVlXNW5XbWh2ZFRFU01CQUdBMVVFQnhNSgpSM1ZoYm1kYWFHOTFNUXd3Q2dZRFZRUUtFd05yT0hNeER6QU5CZ05WQkFzVEJsTjVjM1JsYlRFY01Cb0dBMVVFCkF4TVRhM1ZpWlhKdVpYUmxjeTFUYjNWc2JXRjBaVEFlRncweU1EQTBNVE13TmpRME1EQmFGdzB5TVRBME1UTXcKTmpRME1EQmFNR014Q3pBSkJnTlZCQVlUQWtOT01SSXdFQVlEVlFRSUV3bEhkV0Z1WjFwb2IzVXhFakFRQmdOVgpCQWNUQ1VkMVlXNW5XbWh2ZFRFTU1Bb0dBMVVFQ2hNRGF6aHpNUTh3RFFZRFZRUUxFd1pUZVhOMFpXMHhEVEFMCkJnTlZCQU1UQkc1MWQyRXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFDMUxPZ3UKdENIdHM3dWU5dWhNYndsaDlSeUg1N2F5VXJpTEFKWlJvdjBHWVc2bzNUTVZmOUVVUjd0czdwSTdRRURobC9kVwpTYXhWUkhqZ0JtU3dYa0xlREpqU1R2UzlCUEIyR2trTTc3dUFmdjZDSXhDSzZ2enR0a3VVaXdYQ2pkWkZncVA3CjlmeExTV2VnejAyL2FyRng3RFNTdnUyNjJoWi9ObWJSeHlNRVcrVXRMR05yNGRzTG81a1ZneFRFVHo2YWlwangKUUpNV1JGRTdpaklORTQzRGJESVFJNy9MSlZud1QvSy9lT1psWG1FemhWTENudFRMYnA1Q3Rtekg0WkJvZk0rKwpqSXNtT0VKQUh6Y0xWOUhoNnRrRHBpVmFkQ3FWeHM3M2xFT1dWdmNXU3czTU03aHRtU2dPOUZOemdYVkU1UnljCmJjQndUSVNsOHNibDh3WFJBZ01CQUFHamdnRlJNSUlCVFRBT0JnTlZIUThCQWY4RUJBTUNCYUF3SFFZRFZSMGwKQkJZd0ZBWUlLd1lCQlFVSEF3RUdDQ3NHQVFVRkJ3TUNNQXdHQTFVZEV3RUIvd1FDTUFBd0hRWURWUjBPQkJZRQpGQ3JNUVU4UG82SzZnVzBQU3lMU1J0WVVzOVdQTUI4R0ExVWRJd1FZTUJhQUZJdHRtUkpGdllSMUsxK05rU1dLCmZoVjIzUnlCTUlITkJnTlZIUkVFZ2NVd2djS0NGRzUxZDJFdGQyVmlhRzl2YXkxelpYSjJhV05sZ2lCdWRYZGgKTFhkbFltaHZiMnN0YzJWeWRtbGpaUzV1ZFhkaExYTjVjM1JsYllJa2JuVjNZUzEzWldKb2IyOXJMWE5sY25acApZMlV1Ym5WM1lTMXplWE4wWlcwdWMzWmpnamR1ZFhkaExXTnZiblJ5YjJ4c1pYSXRiV0Z1WVdkbGNpMXRaWFJ5CmFXTnpMWE5sY25acFkyVXViblYzWVMxemVYTjBaVzB1YzNaamhpbHVkWGRoTFhkbFltaHZiMnN0YzJWeWRtbGoKWlM1dWRYZGhMWE41YzNSbGJTNXpkbU02TVRRME16QU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFaQmEwbGE4TgpJRFdhZ0ZEUGE2SVNTZlczcWNFbkZrRk5FR0w4R3M1OEthRjkxazZYWk53U2UyRWtzSjVHR3ZmNXNuQVhzZzlxCjl3WEZFQ3dKazJjdmhJNVJBYkM5SitURE1FUTBQcUNmOE4wWCtpMmJ4ajJDTUdsOXhXcVY5Y1NZR3JVanQ0MHQKaFNjQ0pVOEVqR3REeFBnVUxCYkZkcUd0cU9OZ2FIaFJCNnlmdEkzckJIQUtmNXFGY3JQM2orTlJaNFd5RG1Mago1SW5aQVJiL29BMXlnM2VabHhpL2hXa0hTVW5ZUi8yekhSKzh1UW10M2xQblpOcnYxRUtsc3RIamR3TWRCZm16CnNwdXF2ZnIrQzZQdmMyYWx0NzVQL0NaSFJsUFZhOWs3WERmcTcram9GSmRnMzV6SldSaEZyTnNuMFBpZlk5M2YKQ2FCMlV5YjNnZVBYRmc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
      service:
        name: nuwa-webhook-service
        namespace: nuwa-system
        path: /mutating-pods
        port: 1443
