apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: nuwa-webhook
webhooks:
  - name: injector.nuwa.nip.io
    admissionReviewVersions: ["v1", "v1beta1"]
    sideEffects: NoneOnDryRun
    rules:
      - operations: [ "CREATE" ]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["pods"]
        scope: "Namespaced"
    failurePolicy: Ignore  #  Fail/Ignore
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUV0akNDQTU2Z0F3SUJBZ0lVQWhQNmFNcEpRaFFoY3B6cTdIckh0amNRcmZZd0RRWUpLb1pJaHZjTkFRRUwKQlFBd2NqRUxNQWtHQTFVRUJoTUNRMDR4RWpBUUJnTlZCQWdUQ1VkMVlXNW5XbWh2ZFRFU01CQUdBMVVFQnhNSgpSM1ZoYm1kYWFHOTFNUXd3Q2dZRFZRUUtFd05yT0hNeER6QU5CZ05WQkFzVEJsTjVjM1JsYlRFY01Cb0dBMVVFCkF4TVRhM1ZpWlhKdVpYUmxjeTFUYjNWc2JXRjBaVEFlRncweU1EQTFNRE13T1RBMk1EQmFGdzAwTURBME1qZ3cKT1RBMk1EQmFNR014Q3pBSkJnTlZCQVlUQWtOT01SSXdFQVlEVlFRSUV3bEhkV0Z1WjFwb2IzVXhFakFRQmdOVgpCQWNUQ1VkMVlXNW5XbWh2ZFRFTU1Bb0dBMVVFQ2hNRGF6aHpNUTh3RFFZRFZRUUxFd1pUZVhOMFpXMHhEVEFMCkJnTlZCQU1UQkc1MWQyRXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFEUVNVS0sKbkxmZ3ZnNHZqMk1wQ3pyVjVQNGd4andPMFUzNjk3ZFBiVzFzM280cDF1UUpmcnlSSmpTNTlvZUJURmdTMGFQNgpQYzFHUDl5cTZKWEpoR1AxYjR0a3BQT3d4YWlDckRQek9Jd2R3eGJWTWl5Qk9RbnFLN3RMTkR3RzJYYUdJcHZEClBPcndGakxNdXZzTkpTeWhDNkNESCtLbVQrRVB4cS9ycTZTREVoenA3Q2pZTFZhdUxCT0o1QVNaOXRFRWZiT2wKb28rNXZJUUhJL0dZeGYvZ0dpZlVIQmt5bkNTZzk1OWJIODJkZjlIM2pUa0NKdG1ZUXl4bXJDM3h2ZU5oS0c5WApDc2l1Vmt0QWlpNFNHTFB1U3lQSlJWR0EwNDVJYTF4eTArUWV4TnNyWnpxUjVHVjgzTnRrRWhyblM4aVAySGhDCmNLbjlVTWJLNTlways3Z2pBZ01CQUFHamdnRlJNSUlCVFRBT0JnTlZIUThCQWY4RUJBTUNCYUF3SFFZRFZSMGwKQkJZd0ZBWUlLd1lCQlFVSEF3RUdDQ3NHQVFVRkJ3TUNNQXdHQTFVZEV3RUIvd1FDTUFBd0hRWURWUjBPQkJZRQpGSTJobC9UWVYwSDVJM3VxVlRKYmpFd3N0WmdaTUI4R0ExVWRJd1FZTUJhQUZCZnRzUFlwb0FFNVAwUStoZ1hFCkJpbXFFbmt1TUlITkJnTlZIUkVFZ2NVd2djS0NGR3QxWW1VdGQyVmlhRzl2YXkxelpYSjJhV05sZ2lCcmRXSmwKTFhkbFltaHZiMnN0YzJWeWRtbGpaUzVyZFdKbExYTjVjM1JsYllJa2EzVmlaUzEzWldKb2IyOXJMWE5sY25acApZMlV1YTNWaVpTMXplWE4wWlcwdWMzWmpnamRyZFdKbExXTnZiblJ5YjJ4c1pYSXRiV0Z1WVdkbGNpMXRaWFJ5CmFXTnpMWE5sY25acFkyVXVhM1ZpWlMxemVYTjBaVzB1YzNaamhpbHJkV0psTFhkbFltaHZiMnN0YzJWeWRtbGoKWlM1cmRXSmxMWE41YzNSbGJTNXpkbU02TVRRME16QU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFMT2MzU0hDOQpGWDkweGpOUWkyRnUrbDNHUnpuTjF3NGJvMk9MM05YbGRLQ2Q0dHR1WnAzTTI1dlBRalRPRGxscDFsclZFNjNMCmwyQnplNlZZc2xqUFBFTEpBb2NGMW1QVXFjR0lQZjR3UkpRa000MGM0UFZWN1hrRm1LUzRWbGtpRU1tMlkwNnYKTkptSmc0UmpuMXFxS25mSFp4d0tJeDFFenNuellCSHloVFd2VU9NdUZHenhZR3d6aWE3OEZGMzBISnhqaFQzOAp3Vy9oTUYwR0M5aFN6WjBrNkxnbVBhWXV4QUhGb3d1ci9MZXFtKzFyZFYyeVhiMmJVemFmQUpranpVUEpPbzVJCkxsTVV6cklsd2FmK2hMbDlIQkVPWWpmZ1c3R3RPbGwxOTJWNmt5c04vWkFtZG1zTUhzT1J4SjI4WHdXeFJLYnMKT0Q1aitVcWdSeEUvcFE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
      service:
        name: kube-webhook-service
        namespace: kube-system
        path: /injector-mutating-pods
        port: 1443
  - name: namespace.nuwa.nip.io
    admissionReviewVersions: ["v1", "v1beta1"]
    sideEffects: NoneOnDryRun
    rules:
      - operations: [ "CREATE" ]
        apiGroups: ["","apps","batch"]
        apiVersions: ["v1","v1beta1"]
        resources: ["replicationcontrollers","replicasets","jobs","cronjobs","deployments","statefulset"]
        scope: "Namespaced"
    failurePolicy: Ignore  #  Fail/Ignore
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUV0akNDQTU2Z0F3SUJBZ0lVQWhQNmFNcEpRaFFoY3B6cTdIckh0amNRcmZZd0RRWUpLb1pJaHZjTkFRRUwKQlFBd2NqRUxNQWtHQTFVRUJoTUNRMDR4RWpBUUJnTlZCQWdUQ1VkMVlXNW5XbWh2ZFRFU01CQUdBMVVFQnhNSgpSM1ZoYm1kYWFHOTFNUXd3Q2dZRFZRUUtFd05yT0hNeER6QU5CZ05WQkFzVEJsTjVjM1JsYlRFY01Cb0dBMVVFCkF4TVRhM1ZpWlhKdVpYUmxjeTFUYjNWc2JXRjBaVEFlRncweU1EQTFNRE13T1RBMk1EQmFGdzAwTURBME1qZ3cKT1RBMk1EQmFNR014Q3pBSkJnTlZCQVlUQWtOT01SSXdFQVlEVlFRSUV3bEhkV0Z1WjFwb2IzVXhFakFRQmdOVgpCQWNUQ1VkMVlXNW5XbWh2ZFRFTU1Bb0dBMVVFQ2hNRGF6aHpNUTh3RFFZRFZRUUxFd1pUZVhOMFpXMHhEVEFMCkJnTlZCQU1UQkc1MWQyRXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFEUVNVS0sKbkxmZ3ZnNHZqMk1wQ3pyVjVQNGd4andPMFUzNjk3ZFBiVzFzM280cDF1UUpmcnlSSmpTNTlvZUJURmdTMGFQNgpQYzFHUDl5cTZKWEpoR1AxYjR0a3BQT3d4YWlDckRQek9Jd2R3eGJWTWl5Qk9RbnFLN3RMTkR3RzJYYUdJcHZEClBPcndGakxNdXZzTkpTeWhDNkNESCtLbVQrRVB4cS9ycTZTREVoenA3Q2pZTFZhdUxCT0o1QVNaOXRFRWZiT2wKb28rNXZJUUhJL0dZeGYvZ0dpZlVIQmt5bkNTZzk1OWJIODJkZjlIM2pUa0NKdG1ZUXl4bXJDM3h2ZU5oS0c5WApDc2l1Vmt0QWlpNFNHTFB1U3lQSlJWR0EwNDVJYTF4eTArUWV4TnNyWnpxUjVHVjgzTnRrRWhyblM4aVAySGhDCmNLbjlVTWJLNTlways3Z2pBZ01CQUFHamdnRlJNSUlCVFRBT0JnTlZIUThCQWY4RUJBTUNCYUF3SFFZRFZSMGwKQkJZd0ZBWUlLd1lCQlFVSEF3RUdDQ3NHQVFVRkJ3TUNNQXdHQTFVZEV3RUIvd1FDTUFBd0hRWURWUjBPQkJZRQpGSTJobC9UWVYwSDVJM3VxVlRKYmpFd3N0WmdaTUI4R0ExVWRJd1FZTUJhQUZCZnRzUFlwb0FFNVAwUStoZ1hFCkJpbXFFbmt1TUlITkJnTlZIUkVFZ2NVd2djS0NGR3QxWW1VdGQyVmlhRzl2YXkxelpYSjJhV05sZ2lCcmRXSmwKTFhkbFltaHZiMnN0YzJWeWRtbGpaUzVyZFdKbExYTjVjM1JsYllJa2EzVmlaUzEzWldKb2IyOXJMWE5sY25acApZMlV1YTNWaVpTMXplWE4wWlcwdWMzWmpnamRyZFdKbExXTnZiblJ5YjJ4c1pYSXRiV0Z1WVdkbGNpMXRaWFJ5CmFXTnpMWE5sY25acFkyVXVhM1ZpWlMxemVYTjBaVzB1YzNaamhpbHJkV0psTFhkbFltaHZiMnN0YzJWeWRtbGoKWlM1cmRXSmxMWE41YzNSbGJTNXpkbU02TVRRME16QU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFMT2MzU0hDOQpGWDkweGpOUWkyRnUrbDNHUnpuTjF3NGJvMk9MM05YbGRLQ2Q0dHR1WnAzTTI1dlBRalRPRGxscDFsclZFNjNMCmwyQnplNlZZc2xqUFBFTEpBb2NGMW1QVXFjR0lQZjR3UkpRa000MGM0UFZWN1hrRm1LUzRWbGtpRU1tMlkwNnYKTkptSmc0UmpuMXFxS25mSFp4d0tJeDFFenNuellCSHloVFd2VU9NdUZHenhZR3d6aWE3OEZGMzBISnhqaFQzOAp3Vy9oTUYwR0M5aFN6WjBrNkxnbVBhWXV4QUhGb3d1ci9MZXFtKzFyZFYyeVhiMmJVemFmQUpranpVUEpPbzVJCkxsTVV6cklsd2FmK2hMbDlIQkVPWWpmZ1c3R3RPbGwxOTJWNmt5c04vWkFtZG1zTUhzT1J4SjI4WHdXeFJLYnMKT0Q1aitVcWdSeEUvcFE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
      service:
        name: kube-webhook-service
        namespace: kube-system
        path: /namespace-mutating-resource
        port: 1443
